%define name    @PACKAGE@
%define version @VERSION@
%define release 1mdk
%define major   2
%define residversion 0.11

Summary:        A Commodore 64 music player and SID chip emulator library.
Name:           %{name}
Version:        %{version}
Release:        %{release}
Source:         %{name}-%{version}.tar.bz2
Source1:        resid-%{residversion}.tar.bz2
Patch:          resid-%{residversion}-mute1.patch.bz2
Copyright:      GPL
Group:          System/Libraries
URL:            http://sidplay2.sourceforge.net/
BuildRoot:      %{_tmppath}/%{name}%{major}-buildroot
Prefix:         %{_prefix}

%description
This is a cycle-based development version of a C64 music playing
library which requires the ReSID library as the SID emulator
portion.

A modified version of ReSID %{residversion} is included in this package.

%package devel
Summary:        Development headers and libraries for %{name}%{major}
Group:          Development/C++

%description devel
This package includes the header and library files necessary
for developing applications to use %{name}%{major}.


%prep
rm -rf $RPM_BUILD_ROOT 
%setup -q -a 1
%patch -p0

%build
cd resid-%{residversion}
CXXFLAGS="$RPM_OPT_FLAGS" ./configure --disable-shared
make
cd ..

CXXFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=$RPM_BUILD_ROOT/%{_prefix} --with-resid=$PWD/resid-%{residversion}
make

%install
make install

%clean
rm -rf $RPM_BUILD_ROOT

%postun
/sbin/ldconfig

%post
/sbin/ldconfig

%files
%defattr(-,root,root)
%doc AUTHORS COPYING ChangeLog README TODO
%{_libdir}/*.so.*

%files devel
%defattr(-,root,root)
%{_includedir}/sidplay/*
%{_libdir}/*.la
%{_libdir}/*.a
%{_libdir}/*.so

%changelog
* Sun Apr 1 2001 Simon White <s_a_white@email.com> @VERSION@-1mdk
- First spec file.

# end of file
